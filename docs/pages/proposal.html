<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>BDM Project - Data-Driven Transformation: Optimizing Operations and Customer Engagement at XYZ Café</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="https://lalten.github.io/lmweb/style/latinmodern-roman.css">
<link rel="stylesheet" href="https://lalten.github.io/lmweb/style/latinmodern-mono.css">
<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../pages/proposal.html">Proposal</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">BDM Project</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/SherryS997/BDM-Project" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/proposal.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Proposal</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/mid-term.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mid-Term Submission</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Final Submission</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../pages/slides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project Slides</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#executive-summary" id="toc-executive-summary" class="nav-link active" data-scroll-target="#executive-summary">Executive Summary</a></li>
  <li><a href="#organization-background" id="toc-organization-background" class="nav-link" data-scroll-target="#organization-background">Organization Background</a></li>
  <li><a href="#problem-statement" id="toc-problem-statement" class="nav-link" data-scroll-target="#problem-statement">Problem Statement</a></li>
  <li><a href="#problem-background" id="toc-problem-background" class="nav-link" data-scroll-target="#problem-background">Problem Background</a></li>
  <li><a href="#problem-solving-approach" id="toc-problem-solving-approach" class="nav-link" data-scroll-target="#problem-solving-approach">Problem-Solving Approach</a>
  <ul class="collapse">
  <li><a href="#details-about-the-methods-used-with-justification" id="toc-details-about-the-methods-used-with-justification" class="nav-link" data-scroll-target="#details-about-the-methods-used-with-justification">Details About The Methods Used With Justification</a></li>
  <li><a href="#details-about-the-intended-data-collection-with-justification" id="toc-details-about-the-intended-data-collection-with-justification" class="nav-link" data-scroll-target="#details-about-the-intended-data-collection-with-justification">Details About the Intended Data Collection With Justification</a></li>
  <li><a href="#details-about-analysis-tools-with-justification" id="toc-details-about-analysis-tools-with-justification" class="nav-link" data-scroll-target="#details-about-analysis-tools-with-justification">Details About Analysis Tools With Justification</a></li>
  </ul></li>
  <li><a href="#expected-timeline" id="toc-expected-timeline" class="nav-link" data-scroll-target="#expected-timeline">Expected Timeline</a></li>
  <li><a href="#expected-outcome" id="toc-expected-outcome" class="nav-link" data-scroll-target="#expected-outcome">Expected Outcome</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data-Driven Transformation: Optimizing Operations and Customer Engagement at XYZ Café</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>PDF</strong>: <a href="../images/proposal.pdf" target="_blank">Proposal.pdf</a></p>
<section id="executive-summary" class="level1">
<h1>Executive Summary</h1>
<p>XYZ Café, located in [City], [State], is a local North Indian cuisine café operating within the [Shopping Complex]. Established in January 2022, this café, owned by [Owner Name 1] and [Owner Name 2], primarily serves the local community while also targeting visitors to the complex and nearby businesses. Additionally, they have expanded their reach by partnering with Swiggy for online food delivery.</p>
<p>The main challenge facing XYZ Café is the need to minimize inventory losses and establish a unique market position in the highly competitive food industry. This project aims to address these issues by optimizing inventory management and developing a distinct brand identity. Currently, the café operates without a structured approach to these challenges, leading to inefficiencies and potential revenue loss.</p>
<p>The proposed solution involves the implementation of a data-driven approach to inventory management, utilizing AI and Machine Learning techniques. This will ensure efficient demand forecasting, reduced wastage, and enhanced profitability. Furthermore, a unique branding strategy will be crafted to differentiate XYZ Café in the market.</p>
<p>This proposal outlines a comprehensive strategy to optimize operations, increase efficiency, and elevate the café’s position in the competitive market. The successful execution of these initiatives is expected to yield significant improvements in inventory management and revenue generation.</p>
</section>
<section id="organization-background" class="level1">
<h1>Organization Background</h1>
<p>XYZ Café, situated in [City], [State], is a North Indian cuisine café nestled within the [Shopping Complex]. Owned by [Owner Name 1] and [Owner Name 2], this establishment commenced its operations in the year 2022. Remarkably, the café is efficiently managed by just one cook, supported by the owners in various roles. The cook, whose monthly salary stands at approximately [Salary], is not only remunerated but also provided with housing and food by the proprietors. The establishment’s overall monthly revenue is around [Revenue], whereas operational expenses approximate to around [Expenses]. This economic balance at times leads to a hand-to-mouth financial situation.</p>
<p>XYZ Café offers a diverse menu, including [Menu Items], catering to the varied tastes of its customers. This brief overview of the café’s background highlights its modest yet vital presence in the local culinary landscape.</p>
</section>
<section id="problem-statement" class="level1">
<h1>Problem Statement</h1>
<p>The primary challenge at XYZ Café is twofold:</p>
<ol type="1">
<li><p><strong>Maximizing Profits</strong>: The first objective is to increase profitability through accurate demand forecasting for menu items, reducing unnecessary inventory losses, and optimizing resource allocation.</p></li>
<li><p><strong>Customer Culinary Demographic Identification</strong>: The second objective entails identifying and understanding the café’s customer culinary demographic by analyzing trends in dish sales, allowing for tailored marketing strategies and menu enhancements to cater to specific customer preferences.</p></li>
</ol>
</section>
<section id="problem-background" class="level1">
<h1>Problem Background</h1>
<p>The challenges faced by XYZ Café can be attributed to the recent establishment of the cafe in early 2022. The owners, [Owner Name 1] and [Owner Name 2], who are relatively new to the food business, are currently navigating through a learning curve. This lack of extensive experience in the culinary industry has presented operational challenges and financial hurdles.</p>
<p>Given the café’s nascent establishment, a comprehensive understanding of demand dynamics and optimal inventory management has not been established. Consequently, the cafe faces difficulties in maintaining an effective supply chain, leading to undesirable losses in inventory. The absence of insights through historical data further hampers informed decision-making.</p>
<p>Furthermore, the cafe’s limited experience in the culinary domain has certain implications for understanding its customer demographic. An evolving grasp of customer preferences, habits, and culinary trends presents challenges in aligning offerings with the local consumer base’s expectations. This evolving understanding is reflected in the current product lineup, which may benefit from further refinement to better cater to the changing tastes and preferences of the clientele.</p>
<p>To address these challenges effectively, it is imperative to develop data-driven solutions that encompass demand forecasting, inventory optimization, and an in-depth analysis of customer culinary demographics. These measures will not only enhance operational efficiency but also enable XYZ Café to establish a more profound and sustainable presence in the competitive culinary landscape.</p>
</section>
<section id="problem-solving-approach" class="level1">
<h1>Problem-Solving Approach</h1>
<section id="details-about-the-methods-used-with-justification" class="level2">
<h2 class="anchored" data-anchor-id="details-about-the-methods-used-with-justification">Details About The Methods Used With Justification</h2>
<p>To address the challenges faced by XYZ Café, a two-pronged problem-solving approach is proposed. Firstly, leveraging the provided one-year inventory and sales data, a data-centric methodology will be employed to develop a robust demand estimation model for each menu item. This involves utilizing techniques such as time series analysis, regression modeling, and machine learning algorithms. By examining historical sales and inventory data, the model can provide accurate forecasts, thereby optimizing inventory management and minimizing losses.</p>
<p>Secondly, to identify customer culinary preferences and demographics, data analysis will be performed to discern trends in dish sales. This entails applying segmentation and clustering methods to group customers based on their preferences. Machine learning techniques, such as k-means clustering or association rule mining, can be instrumental in this analysis. Understanding which dishes resonate with specific customer segments allows the café to tailor its offerings effectively and create targeted marketing strategies.</p>
<p>These approaches are data-driven, ensuring precision and relevance in decision-making, and are instrumental in addressing the café’s challenges. They empower XYZ Café to operate efficiently, increase profitability, and cater to its diverse customer base.</p>
</section>
<section id="details-about-the-intended-data-collection-with-justification" class="level2">
<h2 class="anchored" data-anchor-id="details-about-the-intended-data-collection-with-justification">Details About the Intended Data Collection With Justification</h2>
<p>The primary data source for this problem-solving approach is the one-year sales and inventory data provided by the owner. This dataset encompasses crucial information, including historical sales records, menu item specifics, and inventory levels. These data points serve as the foundation for our analysis and modeling.</p>
<p>To extract meaningful insights, data cleaning and preprocessing techniques will be applied. This includes handling missing values, outliers, and ensuring data consistency. Subsequently, exploratory data analysis will be conducted to gain a comprehensive understanding of the data’s distribution and patterns.</p>
<p>The chosen analytical methods will rely exclusively on the provided dataset, as recommended by the owner, ensuring that the solutions are derived from the most relevant and practical information available. By utilizing this comprehensive dataset, we aim to develop effective demand estimation models and customer segmentation strategies, optimizing the café’s operations and enhancing its market positioning.</p>
</section>
<section id="details-about-analysis-tools-with-justification" class="level2">
<h2 class="anchored" data-anchor-id="details-about-analysis-tools-with-justification">Details About Analysis Tools With Justification</h2>
<p>The analysis tools for this project include spreadsheets for initial data exploration and organization. Python, along with libraries like Scikit-learn for machine learning, NumPy for numerical computations, and Matplotlib for data visualization, will be employed for in-depth analysis. Python’s versatility and extensive libraries make it ideal for robust data analysis, while spreadsheets offer a user-friendly interface for initial data inspection.</p>
</section>
</section>
<section id="expected-timeline" class="level1">
<h1>Expected Timeline</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/wbds.png" class="img-fluid figure-img"></p>
<figcaption>Work Breakdown Structure</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/timeline.png" class="img-fluid figure-img"></p>
<figcaption>Project Timeline</figcaption>
</figure>
</div>
</section>
<section id="expected-outcome" class="level1">
<h1>Expected Outcome</h1>
<p>The expected outcome of this project is to significantly enhance the operational efficiency and profitability of XYZ Café. This includes the development of accurate demand forecasting models, reducing inventory losses, and identifying specific customer culinary demographics. The ultimate goal is to establish a robust and data-driven foundation for the café’s sustainable growth, offering a more tailored menu and attracting a diverse customer base.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>